<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.kosmo.project_back.review.mapper.ReviewImageMapper">
    <insert id="insertReviewImage">
        INSERT INTO bg_review_image (
            review_id,
            image_url,
            created_at
        )
        VALUES (
            #{reviewId},
            #{imageUrl},
            DATE_ADD(NOW(), INTERVAL 9 HOUR)
        )
    </insert>

    <select id="findByReviewId"
            parameterType="long"
            resultType="kr.co.kosmo.project_back.review.dto.response.ReviewImageDto">
        SELECT 
            id              AS reviewImageId,
            image_url       AS imageUrl
        FROM bg_review_image
        WHERE review_id = #{reviewId}
        ORDER BY created_at ASC
    </select>

    <!-- 회원 탈퇴 -->
    <delete id="deleteByReviewId" parameterType="long">
        DELETE FROM bg_review_image
        WHERE review_id = #{reviewId}
    </delete>

</mapper>

